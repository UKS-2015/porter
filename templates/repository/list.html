{% extends "project/base.html" %}

{% block content %}

    {% include "project/navtabs.html" with active="repositories" project_title=project_title %}

    <h3>Repositories</h3>
    <table class="table">
        <tbody>
        {% for repository in repository_list %}
            <tr>
                <td>
                    <a href="{% url 'project:repository:overview' project_title repository.title %}">
                    {{repository.title}}
                    </a>
                </td>
                <td>
                    <a class="btn btn-primary btn-xs" href="{% url 'project:repository:change' project_title repository.title %}">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                        Change
                    </a>
                    <a class="btn btn-danger btn-xs delete" href="{% url 'project:repository:delete' project_title repository.title %}">
                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                        Delete
                    </a>
                </td>
            </tr>
        </tbody>
        {% endfor %}
    </table>
    <div class="pagination">
        <span class="step-links">
            {% if repository_list.has_previous %}
            <a href="?page={{repository_list.previous_page_number}}">Previous</a>
            {% endif %}
            Page {{ repository_list.number }} of {{ repository_list.paginator.num_pages }}
            {% if repository_list.has_next %}
            <a href="?page={{repository_list.next_page_number}}">Next</a>
            {% endif %}
        </span>
    </div>
    <p>
        <a class="btn btn-success" href="{% url 'project:repository:create' project_title %}">
         <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
        New Repository
        </a>
        <a class="btn btn-default" href="{% url 'project:overview' project_title %}">Back</a>
    </p>

    <script>
        $( document ).ready(function() {
             $('.delete').click(function(e){
             if (!confirm('Delete this repository?')){
                 e.preventDefault();
             }
            });
        });

    </script>
{% endblock %}